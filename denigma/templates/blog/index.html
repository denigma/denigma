{% extends "blog/base.html" %}

{% load markup %}
{% load hyperlink %}

{% block hierarchy %}
    > <a href="/blog">Blog</a>
    > <a href="/blog">Index</a>
    = <a href="/blog">Posts</a>
{% endblock %}

{% block head_title %}Blog{% endblock %}

{% block subtitle %}Posts{% endblock %}

{% block content %}

{% for post in object_list %}

    <table border="0" color="white">
        <tr>
            <td>
            <h3><a href="/blog/{{ post.id }}">{{ post.title }}</a></h3>

            <div class="post_meta">
               created on {{ post.created }}
               updated on {{ post.updated }}
            </div>

            <div class="post_body">
                {{ post.text|markdown|hyper|safe }} {# |linebreaks }}# markdown already does linebreaks #}
            </div>

            <div class="tags">
                {% for tag in post.tags.all %}
                    <a href="/blog/tag/{{ tag }}">{{ tag }}</a>
                    {% if not forloop.last %}, {% endif %}
                {% endfor %}
            </div>
            </td>

            <td>
            {% for image in post.images.all %}
                <img src={{ image.url }} width="150" height="150" alt={{ images.name }} /></td>
            {% endfor %}
            </td>
        </tr>
    </table>
<hr>

{% endfor %}

{% endblock %}
